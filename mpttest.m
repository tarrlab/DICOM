function [t,df,p] = ttest(x,y)%MPTTEST calculates matched pair t statistic and associated two-tailed p value%    usage: [t,df,p] = ttest(x,y), where x and y are equal sized arrays of numbers%    returns: t = t statistic, df = degrees of freedom, p = significance level (two-tailed)%    %    adapted from mpttest code by Michael J. Tarr (c) 2000%    Formula's for calculation taken from Rosenthal and Rosnow, 1984%    "Essentials of Behavioral Research", page 235n = max(size(x));temp = max(size(y));if n ~= temp	error('Arrays must be of equal size!');endif n == 0	error('No data points!');endif n == 1	error('Not enough data points!');enddf = n - 1;DIFSQsum = sum( ( (x-y) - sum(x-y) / n ).^2 );t = sum(x-y) / n / sqrt( (1.0 / n) * DIFSQsum / df );p = pot(t, df);temp = sprintf('t(%d) = %7.3f, p = %4.3f (two-tailed)', df, t, p);disp(temp);